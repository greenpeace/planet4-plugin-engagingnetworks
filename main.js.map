{"version":3,"sources":["blocks_wide.js","climate.js","enform_dependency.js","enform_side_style.js","enform_submit.js"],"names":["$","document","ready","$wideblocks","$container","eq","force_wide_blocks","vw","width","each","this","innerWidth","margin","attr","css","length","window","on","jQuery","prop","wrap","change","dependency","$el","checked","removeAttr","parent","removeClass","addClass","$sideStyleForm","$enform","find","setContainerWidth","isLarge","captionHeight","outerHeight","p4_enform_frontend","enform","supporter","questions","i","field","value","val","name","indexOf","id","split","serializeArray","replace","standardFieldNames","form","elements","off","validateForm","email","test","String","toLowerCase","url","element","msg","data","appendTo","show","errorDiv","remove","formIsValid","removeErrorMessage","formValue","validateEmail","addErrorMessage","regexPattern","RegExp","callbackFunction","validateField","formData","sessionToken","en_page_id","uri","concat","ajax","type","contentType","crossDomain","headers","ens-auth-token","JSON","stringify","done","hj","google_tag_value","dataLayerPayload","event","gGoal","dataLayer","push","redirectURL","validateUrl","location","hide","animate","scrollTop","offset","top","html","fail","response","console","log","always","hideENSpinner","submit","e","preventDefault","addChangeListeners","en_vars","ajaxurl","showENSpinner","action","token","values","getFormData","submitToEn"],"mappings":"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","file":"main.js","sourcesContent":["// Force wide blocks outside the container\n$(document).ready(function() {\n  'use strict';\n\n  const $wideblocks = $('.block-wide');\n  const $container = $('div.page-template, div.container').eq(0);\n\n  function force_wide_blocks() {\n    const vw = $container.width();\n    $wideblocks.each(function() {\n      const width = $(this).innerWidth();\n      const margin = ((vw - width) / 2);\n\n      if ($('html').attr('dir') === 'rtl') {\n        $(this).css('margin-left', 'auto');\n        $(this).css('margin-right', margin + 'px');\n      } else {\n        $(this).css('margin-left', margin + 'px');\n      }\n    });\n  }\n\n  if ($wideblocks.length > 0 && $container.length > 0) {\n    force_wide_blocks();\n    $(window).on('resize', force_wide_blocks);\n  } else {\n    $('.block-wide').attr('style','margin: 0px !important;padding-left: 0px !important;padding-right: 0px !important');\n    $('iframe').attr('style','left: 0');\n  }\n});\n","jQuery(function ($) {\n  'use strict';\n\n  const $climate = $('.campaign-climate #enform');\n\n  if ($climate.length) {\n    // Adjust first line of the description\n    $($('.form-description').prop('firstChild')).wrap('<span class=\"first-line\">');\n  }\n});\n","jQuery(function ($) {\n  'use strict';\n\n  $('.en__field__input--checkbox').change(function() {\n    let dependency = $(this).attr('data-dependency');\n    let $el        = $('.dependency-'+dependency);\n\n    if (dependency) {\n      if (this.checked) {\n        $el.removeAttr('disabled');\n        $el.parent().removeClass('disable-checkbox');\n      } else {\n        $el.attr('disabled', 'disabled');\n        $el.prop('checked', false);\n        $el.parent().addClass('disable-checkbox');\n      }\n    }\n  });\n});\n","// Force wide blocks outside the container\n$(document).ready(function() {\n  'use strict';\n  let $container = $('div.page-template, div.container').eq(0);\n\n  if (!$container.length) {\n    $container = $('div.page-template').eq(0);\n  }\n\n  const $sideStyleForm = $('.enform-wrap.enform-side-style');\n  const $enform = $sideStyleForm.find('.enform');\n\n  function setContainerWidth() {\n    const isLarge = $(window).width() >= 992;\n    const vw = $(window).width();\n\n    if (!isLarge) {\n      const margin = ((vw - $container.innerWidth()) / 2);\n\n      if ($('html').attr('dir') === 'rtl') {\n        $enform.css('margin-left', 'auto');\n        $enform.css('margin-right', - margin + 'px');\n        $enform.css('padding-right', margin + 'px');\n        $enform.css('padding-left', margin + 'px');\n      } else {\n        $enform.css('margin-left', - margin + 'px');\n        $enform.css('padding-left', margin + 'px');\n        $enform.css('padding-right', margin + 'px');\n      }\n\n      const captionHeight = $sideStyleForm.find('.form-caption').outerHeight();\n      $sideStyleForm.find('picture img').css('height', captionHeight + 'px');\n    } else {\n      $enform.css('margin-left', '');\n      $enform.css('margin-right', '');\n      $enform.css('padding-left', '');\n      $enform.css('padding-right', '');\n      $sideStyleForm.find('picture img').css('height', '100%');\n    }\n  }\n\n  if ($sideStyleForm) {\n    setContainerWidth();\n    $(window).on('resize', setContainerWidth);\n  }\n});\n","/* global en_vars, google_tag_value, dataLayer */\n\nconst p4_enform_frontend = (function ($) {\n\n  const enform = {};\n\n  enform.getFormData = function() {\n    let supporter = {\n      questions: {}\n    };\n\n    // Prepare the questions/optins values the way that ENS api expects them.\n    $.each($('.en__field__input--checkbox:checked'), function (i, field) {\n      // If no value is set then use 'Y' as default value, otherwise keep the already set value.\n      if ( '' === field.value ) {\n        $(this).val('Y');\n      }\n    });\n\n    $.each($('.en__field__input--checkbox:not(\":checked\")'), function (i, field) {\n      if (field.name.indexOf('supporter.questions.') >= 0) {\n        let id = field.name.split('.')[2];\n        supporter.questions['question.' + id] = 'N';\n      }\n    });\n\n    $.each($('#p4en_form').serializeArray(), function (i, field) {\n      if (field.name.indexOf('supporter.questions.') >= 0) {\n        let id = field.name.split('.')[2];\n        if ( 'undefined' === typeof supporter.questions['question.' + id] ) {\n          supporter.questions['question.' + id] = field.value;\n        } else {\n          supporter.questions['question.' + id] = supporter.questions['question.' + id] + '~' + field.value;\n        }\n      } else if (field.name.indexOf('supporter.') >= 0 && '' !== field.value) {\n        supporter[field.name.replace('supporter.', '')] = field.value;\n      }\n    });\n\n    return {\n      standardFieldNames: true,\n      supporter: supporter\n    };\n  };\n\n  enform.addChangeListeners = function(form) {\n    $(form.elements).each(function () {\n      $(this).off('change').on('change', function () {\n        enform.validateForm(form);\n      });\n    });\n  };\n\n  enform.validateEmail = function(email) {\n    // Reference: https://stackoverflow.com/questions/46155/how-to-validate-an-email-address-in-javascript\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  };\n\n  enform.validateUrl = function(url) {\n    return /^(https?|s?ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(url);  //eslint-disable-line no-useless-escape\n  };\n\n  enform.addErrorMessage = function(element,msg) {\n    if ( 0 === $( '.invalid-feedback', $(element).parent() ).length ) {\n      if ('undefined' === typeof msg) {\n        msg = $(element).data('errormessage');\n      }\n      $(element).addClass('is-invalid');\n      const $invalidDiv = $('<div class=\"invalid-feedback\">' + msg + '</div>');\n      $invalidDiv.appendTo($(element).parent()).show();\n    }\n  };\n\n  enform.removeErrorMessage = function(element) {\n    $(element).removeClass('is-invalid');\n    const errorDiv = $( '.invalid-feedback', $(element).parent() );\n    if ( errorDiv.length ) {\n      $(errorDiv).remove();\n    }\n  };\n\n  enform.validateForm = function(form) {\n    let formIsValid = true;\n\n    $(form.elements).each(function () {\n      enform.removeErrorMessage(this);\n      const formValue = $(this).val();\n\n      if (\n        $(this).attr('required') && 'checkbox' !== $(this).attr('type') && !formValue ||\n        $(this).attr('required') && 'checkbox' === $(this).attr('type') && false === $(this).prop('checked') ||\n        'email' === $(this).attr('type') && !enform.validateEmail(formValue)\n      ) {\n        enform.addErrorMessage(this);\n        formIsValid = false;\n      }\n\n      const regexPattern = $(this).attr('data-validate_regex');\n      if (regexPattern) {\n        const regex = new RegExp(regexPattern);\n        const res = regex.test(formValue);\n        if (!res) {\n          enform.addErrorMessage(this, $(this).attr('data-validate_regex_msg'));\n          formIsValid = false;\n        }\n      }\n\n\n      const callbackFunction = $(this).attr('data-validate_callback');\n      if ('function' === typeof window[callbackFunction]) {\n        const validateField = window[callbackFunction]($(this).val());\n        if (true !== validateField) {\n          enform.addErrorMessage(this, validateField);\n          formIsValid = false;\n        }\n      }\n    });\n\n    return formIsValid;\n  };\n\n  // Submit to a en page process api endpoint.\n  enform.submitToEn = function(formData, sessionToken) {\n    const form = $('#enform');\n    const en_page_id = $('input[name=en_page_id]').val();\n    const uri = `https://e-activist.com/ens/service/page/${en_page_id}/process`;\n    $.ajax({\n      url: uri,\n      type: 'POST',\n      contentType: 'application/json',\n      crossDomain: true,\n      headers: {\n        'ens-auth-token': sessionToken\n      },\n      data: JSON.stringify(formData),\n    }).done(function () {\n\n      // Submit Hotjar success\n      if ( typeof hj === 'function' ) {\n        hj('formSubmitSuccessful'); // eslint-disable-line no-undef\n      }\n\n      // DataLayer push event on successful EN form submission.\n      if ( typeof google_tag_value !== 'undefined' && google_tag_value ) {\n        let dataLayerPayload = {\n          'event' : 'petitionSignup'\n        };\n\n        const gGoal = $('#enform_goal').val();\n        if ( gGoal ) {\n          dataLayerPayload.gGoal = gGoal;\n        }\n\n        dataLayer.push(dataLayerPayload);\n      }\n\n      const redirectURL = form.data('redirect-url');\n\n      if (enform.validateUrl(redirectURL)) {\n        window.location = redirectURL;\n      } else {\n        $('#enform-content').hide();\n        $('.thankyou').show();\n        $('html, body').animate({\n          scrollTop:($('#enform').offset().top - 80)\n        }, 'slow');\n      }\n      $('.enform-notice').html('');\n    }).fail(function (response) {\n\n      // Submit Hotjar failure\n      if ( typeof hj === 'function' ) {\n        hj('formSubmitFailed'); // eslint-disable-line no-undef\n      }\n\n      $('.enform-notice').html('<span class=\"enform-error\">There was a problem with the submission</span>');\n      console.log(response); //eslint-disable-line no-console\n    }).always(function () {\n      enform.hideENSpinner();\n    });\n  };\n\n\n  enform.showENSpinner = function() {\n    $('#p4en_form_save_button').attr('disabled', true);\n    $('.en-spinner').show();\n    $('.enform-notice').html('');\n\n  };\n\n  enform.hideENSpinner = function() {\n    $('#p4en_form_save_button').attr('disabled', false);\n    $('.en-spinner').hide();\n  };\n\n  return enform;\n\n})(jQuery);\n\n\n$(document).ready(function () {\n  'use strict';\n\n  // Submit handler for enform\n  $('#p4en_form').submit(function (e) {\n    e.preventDefault();\n\n    // Don't bug users with validation before the first submit\n    p4_enform_frontend.addChangeListeners(this);\n\n    if (p4_enform_frontend.validateForm(this)) {\n      const url = en_vars.ajaxurl;\n\n      p4_enform_frontend.showENSpinner();\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: {\n          action: 'get_en_session_token',\n        },\n      }).done(function (response) {\n        const token = response.token;\n\n        if ('' !== token) {\n          const values = p4_enform_frontend.getFormData();\n          p4_enform_frontend.submitToEn(values, token);\n        } else {\n          p4_enform_frontend.hideENSpinner();\n          $('.enform-notice').html('There was a problem with the submission');\n\n          // Submit Hotjar failure\n          if ( typeof hj === 'function' ) {\n            hj('formSubmitFailed'); // eslint-disable-line no-undef\n          }\n\n        }\n      }).fail(function (response) {\n        p4_enform_frontend.hideENSpinner();\n        $('.enform-notice').html('There was a problem with the submission');\n        console.log(response); //eslint-disable-line no-console\n\n        // Submit Hotjar failure\n        if ( typeof hj === 'function' ) {\n          hj('formSubmitFailed'); // eslint-disable-line no-undef\n        }\n      });\n    }\n  });\n});\n\n\n"]}